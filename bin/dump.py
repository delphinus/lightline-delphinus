#!/usr/bin/env python3
from pathlib import Path
from subprocess import run
from textwrap import dedent


def main() -> None:
    for name in ["nord_improved", "solarized_improved"]:
        filename = (
            Path(__file__).resolve().parent.parent
            / f"autoload/lightline/colorscheme/{name}.vim"
        )
        filename.write_text(
            dedent(
                f"""
                " DO NOT EDIT THIS FILE
                " generated by bin/dump.py
                let g:lightline#colorscheme#{name}#palette="""
            ).strip()
        )
        func = f"lightline#delphinus#colorscheme#{name}#palette"
        script = f'call writefile([{func}()], "{filename}", "a")'
        run(f"vim +'{script}' +q", shell=True)
        print(f"write successfully {name}")


if __name__ == "__main__":
    main()
